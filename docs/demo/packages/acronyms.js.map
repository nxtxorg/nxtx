{"version":3,"file":"acronyms.js","sources":["../../../src/packages/acronyms.ts"],"sourcesContent":["/*  Acronym package for nxtx\n    requires:\n    - basic-formatting (newpage)\n    Author: Malte Rosenbjerg\n    License: MIT */\n\nimport { Package, INxtx } from '../nxtx-types';\ndeclare const nxtx: INxtx;\n\nlet acronyms = {};\nlet usedAcronyms = [];\n\nconst pkg : Package = {\n    name: 'acronyms',\n    requires: [ 'basic-formatting' ],\n    commands: {\n        'define-ac': (acronym, full) => (acronyms[acronym.value] = full.value) && undefined,\n        'ac': acronym => {\n            const full = acronyms[acronym.value];\n            if (!full) {\n                console.warn(`Acronym '${acronym.value}' not defined`);\n                return nxtx.html('b', { class: \"warning\" }, `${acronym.value}!`);\n            }\n            if (usedAcronyms.includes(acronym.value)){\n                return nxtx.text(acronym.value);\n            }\n            usedAcronyms.push(acronym.value);\n            return nxtx.text(`${full} (${acronym.value})`);\n        }\n    },\n    hooks: {\n        prerender: () => {\n            acronyms = {};\n            usedAcronyms = [];\n        }\n    }\n};\n\nif (nxtx) nxtx.registerPackage(pkg);\n\nexport default pkg;\n\n"],"names":[],"mappings":";;;IASA,IAAI,QAAQ,GAAG,EAAE,CAAC;IAClB,IAAI,YAAY,GAAG,EAAE,CAAC;IAEtB,IAAM,GAAG,GAAa;QAClB,IAAI,EAAE,UAAU;QAChB,QAAQ,EAAE,CAAE,kBAAkB,CAAE;QAChC,QAAQ,EAAE;YACN,WAAW,EAAE,UAAC,OAAO,EAAE,IAAI,IAAK,OAAA,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,KAAK,KAAK,SAAS,GAAA;YACnF,IAAI,EAAE,UAAA,OAAO;gBACT,IAAM,IAAI,GAAG,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;gBACrC,IAAI,CAAC,IAAI,EAAE;oBACP,OAAO,CAAC,IAAI,CAAC,cAAY,OAAO,CAAC,KAAK,kBAAe,CAAC,CAAC;oBACvD,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE,EAAK,OAAO,CAAC,KAAK,MAAG,CAAC,CAAC;iBACpE;gBACD,IAAI,YAAY,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,EAAC;oBACrC,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;iBACnC;gBACD,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;gBACjC,OAAO,IAAI,CAAC,IAAI,CAAI,IAAI,UAAK,OAAO,CAAC,KAAK,MAAG,CAAC,CAAC;aAClD;SACJ;QACD,KAAK,EAAE;YACH,SAAS,EAAE;gBACP,QAAQ,GAAG,EAAE,CAAC;gBACd,YAAY,GAAG,EAAE,CAAC;aACrB;SACJ;KACJ,CAAC;IAEF,IAAI,IAAI;QAAE,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;;;;;;;;"}