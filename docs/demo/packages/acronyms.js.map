{"version":3,"file":"acronyms.js","sources":["../../../src/packages/acronyms.ts"],"sourcesContent":["/*  Acronym package for nxtx\n    requires:\n    - basic-formatting (newpage)\n    Author: Malte Rosenbjerg\n    License: MIT */\n\nimport Nxtx from '../nxtx-interface';\nimport { Package } from '../nxtx-types';\ndeclare const nxtx: Nxtx;\n\nlet acronyms = {};\nlet usedAcronyms = [];\n\nconst pkg : Package = {\n    name: 'acronyms',\n    requires: [ 'basic-formatting' ],\n    commands: {\n        'define-ac': (acronym, full) => (acronyms[acronym.value] = full.value) && undefined,\n        'ac': acronym => {\n            const full = acronyms[acronym.value];\n            if (!full) {\n                console.warn(`Acronym '${acronym.value}' not defined`);\n                return nxtx.html('b', { class: \"warning\" }, `${acronym.value}!`);\n            }\n            if (usedAcronyms.includes(acronym.value)){\n                return nxtx.text(acronym.value);\n            }\n            usedAcronyms.push(acronym.value);\n            return nxtx.text(`${full} (${acronym.value})`);\n        }\n    },\n    hooks: {\n        prerender: () => {\n            acronyms = {};\n            usedAcronyms = [];\n        }\n    }\n};\n\nif (nxtx) {\n    Object.keys(pkg.commands).forEach(name => nxtx.registerCommand(name, pkg.commands[name]));\n    nxtx.on('prerender', pkg.hooks.prerender);\n}\n\nexport default pkg;\n\n"],"names":[],"mappings":";;;IAUA,IAAI,QAAQ,GAAG,EAAE,CAAC;IAClB,IAAI,YAAY,GAAG,EAAE,CAAC;IAEtB,IAAM,GAAG,GAAa;QAClB,IAAI,EAAE,UAAU;QAChB,QAAQ,EAAE,CAAE,kBAAkB,CAAE;QAChC,QAAQ,EAAE;YACN,WAAW,EAAE,UAAC,OAAO,EAAE,IAAI,IAAK,OAAA,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,KAAK,KAAK,SAAS,GAAA;YACnF,IAAI,EAAE,UAAA,OAAO;gBACT,IAAM,IAAI,GAAG,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;gBACrC,IAAI,CAAC,IAAI,EAAE;oBACP,OAAO,CAAC,IAAI,CAAC,cAAY,OAAO,CAAC,KAAK,kBAAe,CAAC,CAAC;oBACvD,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE,EAAK,OAAO,CAAC,KAAK,MAAG,CAAC,CAAC;iBACpE;gBACD,IAAI,YAAY,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,EAAC;oBACrC,OAAO,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;iBACnC;gBACD,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;gBACjC,OAAO,IAAI,CAAC,IAAI,CAAI,IAAI,UAAK,OAAO,CAAC,KAAK,MAAG,CAAC,CAAC;aAClD;SACJ;QACD,KAAK,EAAE;YACH,SAAS,EAAE;gBACP,QAAQ,GAAG,EAAE,CAAC;gBACd,YAAY,GAAG,EAAE,CAAC;aACrB;SACJ;KACJ,CAAC;IAEF,IAAI,IAAI,EAAE;QACN,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,GAAA,CAAC,CAAC;QAC1F,IAAI,CAAC,EAAE,CAAC,WAAW,EAAE,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;KAC7C;;;;;;;;"}